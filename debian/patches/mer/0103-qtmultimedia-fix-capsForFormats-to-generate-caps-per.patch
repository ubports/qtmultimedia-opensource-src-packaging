From a756991a4225865e36f27f4dd91914c623f4233a Mon Sep 17 00:00:00 2001
From: Mohammed Hassan <mohammed.hassan@jolla.com>
Date: Mon, 8 Jun 2015 16:50:18 +0300
Subject: [qtmultimedia] fix capsForFormats to generate caps permitting caps
 features. Fixes JB#29720

Origin: upstream, https://git.sailfishos.org/mer-core/qtmultimedia/commit/a756991a4225865e36f27f4dd91914c623f4233a
Last-updated: 2019-09-16
---
 src/gsttools/qgstutils.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/gsttools/qgstutils.cpp b/src/gsttools/qgstutils.cpp
index b9e04e3f..9e7b7737 100644
--- a/src/gsttools/qgstutils.cpp
+++ b/src/gsttools/qgstutils.cpp
@@ -1118,6 +1118,8 @@ GstCaps *QGstUtils::capsForFormats(const QList<QVideoFrame::PixelFormat> &format
                     "video/x-raw",
                     "format"   , G_TYPE_STRING, gst_video_format_to_string(qt_videoFormatLookup[index].gstFormat),
                     NULL));
+
+            gst_caps_set_features(caps, gst_caps_get_size(caps) - 1, gst_caps_features_new_any());
         }
     }
 #else
-- 
2.17.1

